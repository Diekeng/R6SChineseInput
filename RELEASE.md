# R6SChineseInput v1.1 — 发送重试 & 可配置延迟

## 🔄 本次更新

### 文本发送重试机制
*   **自动重试**：`SendInput` 未能完整发送所有键盘事件时，自动重试（默认 3 次），大幅提升全屏游戏中文本发送的成功率。
*   **详细日志**：控制台输出每次尝试的 ✅ 成功 / ⚠️ 不完整 / ❌ 全部失败 状态，方便排查问题。

### 发送参数可配置
*   新增 **⚙️ 发送设置** 面板（主窗口内），支持在线调整以下参数：

| 配置项 | 默认值 | 说明 |
|---|---|---|
| 重试次数 | 3 | 发送失败后的最大重试次数 |
| 重试间隔 | 100ms | 两次重试之间的等待时间 |
| 焦点延迟 | 300ms | 焦点归还游戏后、开始发送文本前的等待时间（v1.0 为固定 200ms） |

*   所有配置修改后即时生效，自动保存至 `config.json`。

## � 变更文件

| 文件 | 变更 |
|---|---|
| `TextSender.cs` | `SendTextAsync` 新增重试循环 |
| `AppConfig.cs` | 新增 `RetryCount`、`RetryDelayMs`、`FocusRestoreDelayMs` 属性 |
| `WindowManager.cs` | 从配置读取延迟/重试参数 |
| `MainWindow.xaml` | 新增"发送设置"UI 区域 |
| `MainWindow.xaml.cs` | 新增配置输入框初始化与保存逻辑 |

## 🚀 使用说明

1.  下载并解压所有文件。
2.  **以管理员身份运行** `R6SChineseInput.exe`。
3.  在游戏中按下 **Ctrl + `** 呼出输入框。
4.  输入中文后按 **Enter** 发送。
5.  如果文字发送不稳定，可在主窗口 ⚙️ 发送设置 中增大重试次数或延迟。

---

*基于 v1.0 更新，完整功能请参见 v1.0 Release Notes。*
